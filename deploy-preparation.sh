#!/bin/bash
# ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

echo "=========================================="
echo "  éººå®¶å¼è‰²ã‚·ã‚¹ãƒ†ãƒ  ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™"
echo "=========================================="
echo ""

# ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒã‚’ç¢ºèª
current_branch=$(git branch --show-current)
echo "ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒ: $current_branch"
echo ""

# æœ€æ–°ã®çŠ¶æ…‹ã‚’å–å¾—
echo "=== GitHubã‹ã‚‰æœ€æ–°ã®çŠ¶æ…‹ã‚’å–å¾— ==="
git fetch origin main
echo ""

# mainãƒ–ãƒ©ãƒ³ãƒã®çŠ¶æ…‹ã‚’ç¢ºèª
echo "=== mainãƒ–ãƒ©ãƒ³ãƒã®çŠ¶æ…‹ ==="
git log -n 3 --oneline main
echo ""

# ãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
echo "=========================================="
echo "  ãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ"
echo "=========================================="
echo ""
echo "âœ… ã‚³ãƒ¼ãƒ‰æº–å‚™:"
echo "  [âœ“] ã™ã¹ã¦ã®å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆæ¸ˆã¿"
echo "  [âœ“] genspark_ai_developer â†’ main ã«ãƒãƒ¼ã‚¸æ¸ˆã¿"
echo "  [âœ“] GitHubã«ãƒ—ãƒƒã‚·ãƒ¥æ¸ˆã¿"
echo ""

echo "ğŸ“‹ æ¬¡ã®æ‰‹é †:"
echo ""
echo "ã€1. Renderï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã€‘"
echo "  1-1. https://dashboard.render.com ã«ã‚¢ã‚¯ã‚»ã‚¹"
echo "  1-2. ã€ŒNew +ã€â†’ã€ŒWeb Serviceã€ã‚’ã‚¯ãƒªãƒƒã‚¯"
echo "  1-3. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠ:"
echo "       - kazunarihonda83-jpg/menya-nishiki-system-cloud"
echo "       - Branch: main"
echo ""
echo "  1-4. ã‚µãƒ¼ãƒ“ã‚¹è¨­å®š:"
echo "       Name: menya-nishiki-backend"
echo "       Region: Singapore"
echo "       Build Command: npm install"
echo "       Start Command: node server/index.js"
echo ""
echo "  1-5. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š:"
echo "       NODE_ENV=production"
echo "       PORT=5003"
echo "       JWT_SECRET=[ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—]"
echo "       SERVE_FRONTEND=false"
echo ""
echo "  1-6. ãƒ‡ã‚£ã‚¹ã‚¯ã‚’è¿½åŠ :"
echo "       Name: sqlite-data"
echo "       Mount Path: /data"
echo "       Size: 1 GB"
echo ""
echo "  1-7. ã€ŒCreate Web Serviceã€ã‚’ã‚¯ãƒªãƒƒã‚¯"
echo ""
echo "  1-8. ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œã€URLã‚’ãƒ¡ãƒ¢:"
echo "       ä¾‹: https://menya-nishiki-backend.onrender.com"
echo ""
echo "  1-9. Render Shellã§ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ:"
echo "       npm run migrate"
echo ""

echo "ã€2. ç’°å¢ƒå¤‰æ•°ã®æ›´æ–°ã€‘"
echo "  2-1. .env.production ã‚’ç·¨é›†:"
echo "       VITE_API_URL=https://[Renderã®URL]/api"
echo ""
echo "  2-2. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥:"
echo "       git add .env.production"
echo "       git commit -m 'chore: Render URL ã‚’è¨­å®š'"
echo "       git push origin main"
echo ""

echo "ã€3. Vercelï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã€‘"
echo "  3-1. https://vercel.com ã«ã‚¢ã‚¯ã‚»ã‚¹"
echo "  3-2. ã€ŒAdd New...ã€â†’ã€ŒProjectã€ã‚’ã‚¯ãƒªãƒƒã‚¯"
echo "  3-3. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠ:"
echo "       - kazunarihonda83-jpg/menya-nishiki-system-cloud"
echo ""
echo "  3-4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š:"
echo "       Project Name: menya-nishiki-frontend"
echo "       Framework: Vite"
echo "       Build Command: npm run build"
echo "       Output Directory: dist"
echo ""
echo "  3-5. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š:"
echo "       VITE_API_URL=https://[Renderã®URL]/api"
echo ""
echo "  3-6. ã€ŒDeployã€ã‚’ã‚¯ãƒªãƒƒã‚¯"
echo ""
echo "  3-7. ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œã€URLã‚’ãƒ¡ãƒ¢:"
echo "       ä¾‹: https://menya-nishiki-frontend.vercel.app"
echo ""

echo "ã€4. å‹•ä½œç¢ºèªã€‘"
echo "  4-1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯:"
echo "       curl https://[Renderã®URL]/api/health"
echo ""
echo "  4-2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹:"
echo "       https://[Vercelã®URL]"
echo ""
echo "  4-3. ãƒ­ã‚°ã‚¤ãƒ³:"
echo "       ãƒ¦ãƒ¼ã‚¶ãƒ¼å: éººå®¶å¼è‰²"
echo "       ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: admin123"
echo ""
echo "  4-4. å„ç”»é¢ã‚’ç¢ºèª:"
echo "       - ãƒ›ãƒ¼ãƒ ï¼ˆã™ã¹ã¦Â¥0ï¼‰"
echo "       - æç›Šè¨ˆç®—æ›¸ï¼ˆã™ã¹ã¦Â¥0ï¼‰"
echo "       - å—æ³¨å–å¼•ä¸€è¦§ï¼ˆãƒ‡ãƒ¼ã‚¿ãªã—ï¼‰"
echo ""

echo "=========================================="
echo "  è©³ç´°ã¯ DEPLOYMENT_GUIDE.md ã‚’å‚ç…§"
echo "=========================================="
echo ""
echo "æº–å‚™å®Œäº†ï¼ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚"
echo ""
