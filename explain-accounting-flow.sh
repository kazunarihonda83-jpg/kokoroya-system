#!/bin/bash

echo "📚 在庫会計の正しい理解"
echo "===================="

echo ""
echo "❓ よくある誤解と正しい理解"
echo "------------------------"

echo ""
echo "【誤解1】在庫を登録したら損益計算書に反映される"
echo "→ ❌ 間違い: 在庫は「資産」なので損益には影響しません"
echo "→ ✅ 正解: 在庫を「出庫」したときに「売上原価」として損益に計上されます"

echo ""
echo "【誤解2】在庫を登録したらキャッシュフローに反映される"
echo "→ ❌ 間違い: 在庫登録は「買掛金」なので現金は動きません"
echo "→ ✅ 正解: 買掛金を「支払った」ときにキャッシュフローに計上されます"

echo ""
echo "📊 現在の状況"
echo "------------------------"
echo "在庫: 拉麺 20個 @ ¥200 = ¥4,000"
echo ""
echo "【自動生成された仕訳】"
echo "借方: 商品（資産） ¥4,000"
echo "貸方: 買掛金（負債） ¥4,000"
echo ""
echo "【貸借対照表への影響】"
echo "- 資産（商品）: ¥4,000 増加 ✅"
echo "- 負債（買掛金）: ¥4,000 増加 ✅"
echo ""
echo "【損益計算書への影響】"
echo "- なし（在庫は資産なので損益に影響しない）✅"
echo ""
echo "【キャッシュフローへの影響】"
echo "- なし（買掛金なので現金は動いていない）✅"

echo ""
echo "💡 在庫を損益計算書に反映させる方法"
echo "--------------------------------"
echo "1. 在庫管理画面で「在庫出庫」を行う"
echo "   → 在庫移動タイプ: out"
echo "   → 数量: 3個（例）"
echo ""
echo "2. 自動的に以下の仕訳が生成される:"
echo "   借方: 売上原価（費用） ¥600"
echo "   貸方: 商品（資産） ¥600"
echo ""
echo "3. 損益計算書に反映される:"
echo "   売上原価: ¥600"
echo "   粗利益: 売上高 - ¥600"

echo ""
echo "💡 キャッシュフローに反映させる方法"
echo "--------------------------------"
echo "1. 会計帳簿 > 仕訳帳 で「買掛金支払い」を登録"
echo "   借方: 買掛金（負債） ¥4,000"
echo "   貸方: 現金（資産） ¥4,000"
echo ""
echo "2. キャッシュフロー計算書に反映される:"
echo "   営業キャッシュフロー支出: ¥4,000"

echo ""
echo "🎯 ご要望の確認"
echo "------------------------"
echo "次のどちらをご希望ですか？"
echo ""
echo "A) 在庫「入庫時」に損益計算書とキャッシュフローに反映させたい"
echo "   → これは会計原則に反するため推奨しません"
echo "   → 在庫は資産であり、購入時は損益に影響しません"
echo ""
echo "B) 在庫「出庫時」に売上原価として損益計算書に自動反映させたい"
echo "   → これは既に実装済みです ✅"
echo "   → 在庫管理画面で「出庫」操作を行ってください"
echo ""
echo "C) 買掛金支払い時にキャッシュフローに反映させたい"
echo "   → これは手動仕訳で対応可能です"
echo "   → または自動化機能を追加実装することも可能です"
