# 麺家弍色 新機能デモガイド

## 🌐 アクセス情報

### フロントエンド（本番環境）
**URL**: https://3013-iwz00ie3gdkhvxpx2ni1z-5c13a017.sandbox.novita.ai

### バックエンドAPI
**URL**: https://5003-iwz00ie3gdkhvxpx2ni1z-5c13a017.sandbox.novita.ai

### ログイン情報
- **ユーザー名**: `麺家弍色`
- **パスワード**: `admin123`

---

## ✅ 実装済み新機能

### 1️⃣ 現金売上機能（売掛金を経由しない）

#### 確認方法
1. ログイン後、左メニューから「**受注取引**」をクリック
2. 新規受注を作成時、「**支払いステータス**」を「**支払済み**」に選択
3. 保存後、以下で確認：
   - **会計帳簿** → **貸借対照表** → 資産の部「**現金**」が増加
   - **会計帳簿** → **総勘定元帳** → 現金勘定 → 摘要に「**現金売上**」

#### 自動作成される仕訳
```
借方: 現金 ¥XX,XXX / 貸方: 売上高 ¥XX,XXX
```

#### デモデータ
- ✅ 現金売上 3件作成済み（2026-02-14）
- 支払済みの受注取引として記録

---

### 2️⃣ 発注取引の支払い処理

#### 確認方法
1. 左メニューから「**発注管理**」をクリック
2. 発注一覧に「**支払い**」カラムが表示される
   - 🟢 **支払済み**（緑色バッジ）
   - 🔴 **未払い**（赤色バッジ）
3. 新規発注作成時または編集時に「**支払いステータス**」を選択可能

#### 自動作成される仕訳

**納品時**:
```
借方: 仕入高 ¥XX,XXX / 貸方: 買掛金 ¥XX,XXX
```

**支払済みの場合（追加）**:
```
借方: 買掛金 ¥XX,XXX / 貸方: 現金 ¥XX,XXX
```

#### デモデータ
- ✅ 支払済み発注 2件（麺の仕入れ）
- ✅ 未払い発注 1件（スープ材料の仕入れ）
- 貸借対照表の買掛金: ¥4,400（未払い分）

---

### 3️⃣ 追加された勘定科目

#### 貸借対照表で確認
1. 左メニューから「**会計帳簿**」→「**貸借対照表**」
2. 以下の勘定科目が表示される：

**資産の部**:
- ✅ **現金**（1000）
- ✅ **売掛金**（1100）
- ✅ **預金**（1200）← 新規追加

**負債の部**:
- ✅ **買掛金**（2000）
- 🔜 **借入金**（2100）← データ作成時に表示
- 🔜 **前受金**（2200）← データ作成時に表示

**費用の部**（総勘定元帳で確認）:
- ✅ **給料**（6000）
- ✅ **地代家賃**（7000）
- ✅ **水道光熱費**（8000）← 新規追加

---

### 4️⃣ 経費支払い機能（APIのみ）

#### ⚠️ 現在の状態
- バックエンドAPI: ✅ 実装済み
- フロントエンドUI: 🔜 今後実装予定

#### API確認方法

```bash
# トークン取得
curl -X POST "https://5003-iwz00ie3gdkhvxpx2ni1z-5c13a017.sandbox.novita.ai/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"username":"麺家弍色","password":"admin123"}'

# 給料支払い
curl -X POST "https://5003-iwz00ie3gdkhvxpx2ni1z-5c13a017.sandbox.novita.ai/api/expenses/payments" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "payment_date": "2026-02-14",
    "expense_category": "給料",
    "description": "2月分給料",
    "amount": 250000
  }'
```

#### 対応カテゴリ
1. **給料** - 勘定科目コード: 6000
2. **地代家賃** - 勘定科目コード: 7000
3. **水道光熱費** - 勘定科目コード: 8000

#### デモデータ
- ✅ 給料支払い: ¥250,000
- ✅ 地代家賃支払い: ¥120,000
- ✅ 水道光熱費支払い: ¥35,000
- **合計経費**: ¥405,000

#### 確認方法
1. 「**会計帳簿**」→「**貸借対照表**」
   - 資産の部「現金」が減少
   - 純資産の部「当期純利益」が減少
2. 「**会計帳簿**」→「**損益計算書**」
   - 費用の部に各経費が表示

---

### 5️⃣ 預金取引機能（APIのみ）

#### ⚠️ 現在の状態
- バックエンドAPI: ✅ 実装済み
- フロントエンドUI: 🔜 今後実装予定

#### API確認方法

```bash
# 預け入れ
curl -X POST "https://5003-iwz00ie3gdkhvxpx2ni1z-5c13a017.sandbox.novita.ai/api/deposits/transactions" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "transaction_date": "2026-02-14",
    "transaction_type": "deposit",
    "description": "売上金預け入れ",
    "amount": 200000
  }'

# 引き出し
curl -X POST "https://5003-iwz00ie3gdkhvxpx2ni1z-5c13a017.sandbox.novita.ai/api/deposits/transactions" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "transaction_date": "2026-02-14",
    "transaction_type": "withdrawal",
    "description": "運転資金引き出し",
    "amount": 50000
  }'
```

#### 自動作成される仕訳

**預け入れ**:
```
借方: 預金 ¥200,000 / 貸方: 現金 ¥200,000
```
- 現金が減少、預金が増加（資産合計は変わらない）

**引き出し**:
```
借方: 現金 ¥50,000 / 貸方: 預金 ¥50,000
```
- 預金が減少、現金が増加（資産合計は変わらない）

#### デモデータ
- ✅ 預金預け入れ: ¥200,000
- ✅ 預金引き出し: ¥50,000
- **預金残高**: ¥220,000（累計）

#### 確認方法
1. 「**会計帳簿**」→「**貸借対照表**」
   - 資産の部に「**現金**」と「**預金**」が両方表示される
2. 「**会計帳簿**」→「**総勘定元帳**」
   - 現金勘定に「預金預け入れ」「預金引き出し」が記録される

---

## 📊 デモデータサマリー

### 貸借対照表（2026-02-14時点）

```
資産の部
  現金         ¥-679,950  （現金売上 - 経費 - 仕入支払 - 預金預け入れ + 預金引き出し）
  預金         ¥ 220,000  （預け入れ - 引き出し）
  ─────────────────────
  資産合計     ¥-459,950

負債の部
  買掛金       ¥   4,400  （未払い発注分）
  ─────────────────────
  負債合計     ¥   4,400

純資産の部
  当期純利益   ¥-464,350  （収益 - 費用）
  ─────────────────────
  純資産合計   ¥-464,350
```

### 取引内訳

| 取引タイプ | 件数 | 金額 |
|-----------|------|------|
| 現金売上（支払済み受注） | 3件 | 収益 |
| 売掛金計上（未払い受注） | 2件 | 収益 |
| 発注支払い（支払済み） | 2件 | ¥4,950 |
| 発注（未払い） | 1件 | ¥4,400 |
| 給料支払い | 1件 | ¥250,000 |
| 地代家賃支払い | 1件 | ¥120,000 |
| 水道光熱費支払い | 1件 | ¥35,000 |
| 預金預け入れ | 1件 | ¥200,000 |
| 預金引き出し | 1件 | ¥50,000 |

---

## 🔍 確認チェックリスト

### ✅ フロントエンドで確認できる機能

- [ ] ログインできる
- [ ] 受注取引で「支払いステータス」フィールドが表示される
- [ ] 支払済み受注を作成できる
- [ ] 発注管理で「支払い」カラムが表示される
- [ ] 発注で「支払いステータス」フィールドが表示される
- [ ] 貸借対照表に「現金」「預金」「売掛金」が表示される
- [ ] 総勘定元帳で現金勘定に「現金売上」「仕入支払い」が表示される

### ✅ APIで確認できる機能

- [ ] 経費支払いAPIが正常に動作する
- [ ] 預金取引APIが正常に動作する
- [ ] 貸借対照表APIに預金残高が含まれる
- [ ] 仕訳帳に全ての取引が正しく記録される

---

## 🚀 次のステップ

### 今後実装予定のフロントエンド機能

1. **経費支払い画面**
   - 給料、地代家賃、水道光熱費の支払い入力フォーム
   - 経費支払い履歴一覧

2. **預金取引画面**
   - 預け入れ・引き出しの入力フォーム
   - 預金取引履歴一覧

3. **その他の取引タイプ**
   - 借入金受領
   - 前受金受領
   - その他の経費カテゴリ追加

---

## 📝 注意事項

- このデモ環境は開発用サンドボックス環境です
- データは定期的にリセットされる可能性があります
- 本番環境にデプロイする前に十分なテストを実施してください

---

**最終更新**: 2026-02-12
**ビルドバージョン**: v1.1.0-demo
